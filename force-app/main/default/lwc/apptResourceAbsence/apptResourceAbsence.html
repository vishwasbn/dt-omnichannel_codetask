<template>
    <div class="slds-theme_default slds-p-top_small" style="height:30%;">       
        <lightning-layout multiple-rows>
            <!-- FIRST SCREEN: START -->
            <template if:true={isFirstScreen}>
                <lightning-layout-item size="12" height="10px !important" padding="around-small" >
                    <div class="slds-text-body_small" style="color:red;font-weight:bold">Please Select Date of Party before proceeding to next steps.</div> 
                </lightning-layout-item>               
                 <lightning-layout-item size="4" padding="around-small" >                
                    <div>   
                        <lightning-input type="date" min= {today} data-id="dateParty" onchange={getDateParty} value={dateParty} label="Date of Party" placeholder="Select Date of Party"></lightning-input>
                    </div>  
                </lightning-layout-item>
                <lightning-layout-item size="4" class="slds-p-left_xx-large slds-p-top_medium">              
                </lightning-layout-item>
                <lightning-layout-item size="3" class="slds-p-left_xx-large slds-p-top_medium">              
                    <div>
                        <lightning-input
                            name="enter-search"
                            label=""
                            data-id="searchtext"
                            type="search"
                            class="" value={searchKey}>
                        </lightning-input>                
                    </div>
                </lightning-layout-item>
                <lightning-layout-item size="1"  class="slds-p-left_medium slds-p-top_x-large" >                
                    <lightning-button   variant="brand" 
                                        label="Search" 
                                        title="Search"
                                        id="searchStoreButton"  
                                        onclick={searchStore}>
                    </lightning-button>               
                </lightning-layout-item>
               
                <lightning-layout-item size="12" padding="around-small" >                
                    <div style="height:250px;">
                        <!--<lightning-datatable
                                key-field="id"
                                data={data}
                                columns={columns}
                                selected-rows={checkedRows}
                                onrowselection={rowSelected}
                                resize-column-disabled >
                        </lightning-datatable>-->
                        <table class="slds-table slds-table_cell-buffer slds-table_bordered " aria-labelledby="element-with-table-label other-element-with-table-label">
                            <thead>
                                <tr class="slds-line-height_reset">
                                    <th class="" scope="col">
                                        <div class="slds-truncate" title="Select All">
                                            Select Store
                                        </div>
                                    </th>
                                    <th class="" scope="col">
                                        <div class="" title="Name">Name</div>
                                    </th>
                                    <th class="" scope="col">
                                        <div class="" title="Operating Hours">Operating Hours</div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <template for:each={data} for:item="currentRow" for:index="i">
                                    <tr class="slds-hint-parent" key={currentRow.id}>
                                        <th data-label="Select All" scope="row">
                                            <div class="slds-truncate" title="Select-Store-Checkbox">
                                                <div class="slds-checkbox" style="padding-left: 15px;">
                                                    <input type="checkbox" name="Favs" onchange={getSelectedStore} id={currentRow.id} value={currentRow.id} checked={currentRow.isChecked} />
                                                    <label class="slds-checkbox__label" for={currentRow.id}>
                                                    <span class="slds-checkbox_faux"></span>
                                                    <span class="slds-form-element__label"></span>
                                                    </label>
                                                </div>
                                            </div>
                                        </th>
                                        <td data-label="Store Name">
                                            <div class="slds-col slds-size_2-of-3" title="Store-Name">
                                                {currentRow.Name}
                                            </div>
                                        </td>
                                        <td data-label="Close Date">
                                            <div class="slds-col slds-size_2-of-3" title="Close-Date">
                                                {currentRow.OpeartingHours}
                                            </div>
                                        </td>
                                    </tr>   
                                </template>                              
                            </tbody>
                        </table>
                    </div>                        
                </lightning-layout-item>  
            </template>
            <!-- FIRST SCREEN: END -->
            <!-- SECOND SCREEN: START -->
            <template if:true={isSecondScreen}>
                <lightning-layout-item size="12" padding="around-small" >                
                    <div style="height:350px;" class="slds-scrollable_y">            
                        <table class="slds-table slds-table_cell-buffer slds-table_bordered " aria-labelledby="element-with-table-label other-element-with-table-label">
                            <thead>
                                <tr class="slds-line-height_reset">
                                    <th class="" scope="col">
                                        <div class="slds-truncate" title="Store">Store</div>
                                    </th>
                                    <th class="" scope="col">
                                        <div class="" title="Start Time">Start Time</div>
                                    </th>
                                    <th class="" scope="col">
                                        <div class="" title="End Time">End Time</div>
                                    </th>
                                    <th class="" scope="col">
                                        <div class="slds-truncate" title="Date">Date</div>
                                    </th>
                                    <th class="" scope="col">
                                        <div class="slds-truncate" title="TimeZone">TimeZone</div>
                                    </th>                                
                                </tr>
                            </thead>
                            <tbody>
                                <template for:each={recordsData} for:item="data" for:index="i">
                                    <tr class="slds-hint-parent" key={data}>
                                        <th data-label="Store ID" scope="row">
                                            <div class="slds-truncate" title="Store-ID">
                                                {data.Name}
                                            </div>
                                        </th>
                                        <td data-label="Start Time">
                                            <div class="slds-col slds-size_2-of-3" title="Start-Time">
                                                <lightning-input type="time" data-id={data.id} variant="label-hidden" name={data.id} label="" value={data.StartTime} onchange={handleStartTimeChange}></lightning-input>
                                            </div>
                                        </td>
                                        <td data-label="End Time">
                                            <div class="slds-col slds-size_2-of-3" title="End-Time">
                                                <lightning-input type="time" data-id={data.id} variant="label-hidden" name={data.id} label="" value={data.EndTime} onchange={handleEndTimeChange}></lightning-input>
                                            </div>
                                        </td>
                                        <td data-label="Absence Date">
                                            <div class="slds-col slds-size_2-of-3" title="Absence-Date">
                                                <lightning-input type="date" data-id={data.id} variant="label-hidden" name={data.id} label="" value={data.StoreDate} onchange={handleStoreDateChange}></lightning-input>
                                            </div>
                                        </td>
                                        <td data-label="Store Time Zone">
                                            <div class="slds-truncate" title="Store Time Zone">{data.StoreTimeZone}</div>
                                        </td>
                                    </tr>   
                                </template>                              
                            </tbody>
                        </table>
                    </div>                        
                </lightning-layout-item> 
            </template>
            <!-- SECOND SCREEN: END -->
            <template if:true={isThirdScreen}>
                <lightning-layout-item size="12" padding="around-small"> 
                    <template if:true={isSuccess}>
                        <div style="color:green;text-align:center;font-weight: 600;font-size: large;" class="slds-p-top_large">
                            Stores have been successfully blocked the time as per the store time zone.
                        </div>
                    </template>
                    <template if:false={isSuccess}>
                        <div style="color:red;text-align:center;font-weight: 600;font-size: large;" class="slds-p-top_large">
                            Errors are getting while blocking time for stores.
                        </div>
                    </template>                    
                </lightning-layout-item>
            </template>

            <lightning-layout-item size="12" padding="around-large" >  
                <div class="slds-align_absolute-center">  
                    <template if:true={isFirstScreen}>
                        <lightning-button   variant="brand" 
                                        label="Next" 
                                        title="Next" 
                                        disabled={disableButton}
                                        onclick={handleFirstScreen}>
                        </lightning-button>
                    </template>
                    <template if:true={isSecondScreen}>
                        <lightning-button variant="brand" 
                                        label="Back" 
                                        title="Back" 
                                        onclick={goBack}>
                        </lightning-button>&nbsp;&nbsp;&nbsp;
                        <lightning-button   variant="brand" 
                                        label="Submit" 
                                        title="Submit" 
                                        onclick={handleSecondScreen}>
                        </lightning-button>
                    </template>
                            
                </div>                        
            </lightning-layout-item>               
        </lightning-layout>                         
    </div>
    
</template>